{% extends "base.html" %}
{% block content %}
<div class="container mt-4">
    <div class="card shadow">
        <div class="card-header bg-primary text-white">
            <h4 class="mb-0">üìà –ü—Ä–æ–≥–Ω–æ–∑ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ—Å—Ç–∏ —É–∑–ª–∞ (AI)</h4>
        </div>
        <div class="card-body">
            <p>–¢–µ–∫—É—â–µ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤: <strong>{{ total_devices }}</strong></p>
            <canvas id="growthChart" style="max-height: 400px;"></canvas>
        </div>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
    const ctx = document.getElementById('growthChart').getContext('2d');
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: {{ chart_data.labels | tojson }},
            datasets: [
                {
                    label: '–ò—Å—Ç–æ—Ä–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π',
                    data: {{ chart_data.history | tojson }},
                    borderColor: '#0d6efd',
                    backgroundColor: 'rgba(13, 110, 253, 0.1)',
                    fill: true
                },
                {
                    label: '–ü—Ä–æ–≥–Ω–æ–∑ –Ω–µ–π—Ä–æ—Å–µ—Ç–∏ (7 –¥–Ω–µ–π)',
                    data: {{ chart_data.forecast | tojson }},
                    borderColor: '#dc3545',
                    borderDash: [5, 5],
                    fill: false
                }
            ]
        },
        options: { responsive: true, scales: { y: { beginAtZero: true } } }
    });
</script>
{% endblock %}